@model HotelSys.ViewModel.ReceptionViewModel




<h4 class="card-title mt-3 mb-1">المالية</h4>

<div class="row  d-print-none">


    <div class="col-md-10">
        </div>
    <center><div id="resultBill"></div></center>
        </div>

<div class="row  d-print-none">


    <div class="col-md-4">
       

        <input type="hidden" id="idBillID" asp-for="bill.Id" class="form-control">
       

        <div class="form-group row mb-6">
            <label for="txtFirstNameShipping" class="col-lg-4 col-form-label text-end">الايجار اليومي (بدون ضريبة)</label>
            <div class="col-lg-4">

                <div class="input-group">
                    <div class="form-outline">
                        <input type="text" id="priceB"  asp-for="Price" class="form-control" disabled>

                    </div>
                    @*<button type="button" class="btn btn-primary">
                            تغيير
                        </button>*@
                </div>

            </div>
        </div><!--end form-group-->

        </div>
        <div class="col-md-4">
       
       
            <div class="form-check form-switch">

           @* <input 
                   id="IncludeTaxHide" type="hidden"  asp-for="bill.IncludeTax">*@

                <input class="form-check-input"
                   id="IncludeTax" type="checkbox"  asp-for="bill.IncludeTax" >
                   @{
                       if(@Model.bill.IncludeTax==true)
                       {
                    <label class="form-check-label"> السعر شامل الضريبة VAT </label>
                       }
                       else{
                    <label class="form-check-label"> السعر غير شامل الضريبة VAT </label>
                       }
                   }
                
            </div>


    </div>

      <div class="col-md-4">
       

       
            <div class="form-check form-switch">

            <input id="IsBaladiTaxHide" type="hidden" asp-for="bill.IsBaladiTax">

           @* <input class="form-check-input"
                   id="IsBaladiTax" type="text" asp-for="bill.IsBaladiTax" disabled>*@

                <input class="form-check-input"
                   id="IsBaladiTax" type="checkbox" asp-for="bill.IsBaladiTax" >
                   @{
                if (@Model.bill.IsBaladiTax == true)
                       {
                    <label class="form-check-label"> حالة ضريبة بلدي : نشط </label>
                       }
                       else{
                    <label class="form-check-label"> حالة ضريبة بلدي : غير نشط </label>
                       }
                   }
                
            </div>


    </div><!--end col-->
   

</div>


<div class="row  d-print-none">
    <div class="col-md-6">
        <div class="form-group row mb-2" >
            <label for="TotalTaxRate" class="col-lg-5 col-form-label text-end"> نسبة الضريبة:</label>
            <div class="col-lg-7">
                <input id="TotalTaxRate" type="number" min="1" max="100"
                       asp-for="bill.TotalTaxRate" 
                       class="form-control">

            </div>
        </div>
    </div>
        <div class="col-md-6">
        <div class="form-group row mb-2" >
            <label for="TotalTaxPrice" class="col-lg-5 col-form-label text-end"> مبلغ الضريبة </label>
            <div class="col-lg-7">
                <input id="TotalTaxPrice"
                       asp-for="bill.TotalTaxPrice"
                       type="number"
                       class="form-control">
               

            </div>
        </div>


    </div>

    <div class="col-md-6 divbaladiN">
        <div class="form-group row mb-2">
            <label for="TotalTaxPrice" class="col-lg-5 col-form-label text-end">% ضريبة بلدي </label>
            <div class="col-lg-7">
                <input id="TotalBaladiTaxRate"
                       asp-for="bill.TotalBaladiTaxRate"
                       class="form-control" disabled>


            </div>
        </div>


    </div>
      </div>

<div class="row  d-print-none">
    <div class="col-md-6">
        <div class="form-group row mb-2">
            <label for="typeDiscount" class="col-lg-3 col-form-label text-end">نوع الخصم:</label>
            <div class="col-lg-9">
                <select class="form-select" aria-label="TypeDiscount" id="TypeDiscount" asp-for="bill.TypeDiscount">
                    <option value="-1">اختر  </option>
                    <option value="1">مبلغ </option>
                    <option value="2">نسبة مئوية</option>



                </select>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group row mb-2" id="amountDis">
            <label for="typeDiscount" class="col-lg-3 col-form-label text-end">مبلغ الخصم:</label>
            <div class="col-lg-9">
                <input id="QtyDiscount" type="number"
                       asp-for="bill.QtyDiscount"
                       class="form-control">

            </div>
        </div>
        <div class="form-group row mb-2" id="rateDis">
            <label for="typeDiscount" class="col-lg-3 col-form-label text-end">نسبة الخصم:</label>
            <div class="col-lg-9">
                <input id="QtyDiscountRate"
                       asp-for="bill.QtyDiscountRate"
                       type="number" min="1" max="100"
                       class="form-control">
                <span>  % </span>

            </div>
        </div>


    </div>
</div>
    



<div class="row  d-print-none">
    <div class="col-md-6">
        <div class="form-group row mb-2">
            <label for="txtCompanyShipping" class="col-lg-3 col-form-label text-end">المقبوضات: </label>
            <div class="col-lg-9">

                <div class="input-group">
                    <div class="form-outline">
                        <select class="form-select" id="compoboxEx" aria-label="compoboxEx" asp-items="ViewBag.payBandList">
                        </select>

                    </div>
                    <button type="button" class="btn btn-de-primary btn-sm"
                            onclick="showTalkDoad()"
                            data-animation="bounce">
                        + اضافة
                    </button>

                    <partial name="bills/_newDoadPayModal.cshtml" />

                    <button type="button" class="btn btn-de-primary btn-sm" data-bs-toggle="modal"
                            data-animation="bounce" data-bs-target="#addDoadPayModal">
                        طباعة
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group row mb-2">
            <label for="txtCompanyShipping" class="col-lg-3 col-form-label text-end">المصروفات: </label>
            <div class="col-lg-9">

                <div class="input-group">
                    <div class="form-outline">
                        <select class="form-select" id="compoboxT" aria-label="compoboxT" asp-items="ViewBag.exBandList">
                            @*<option selected="">   </option>
                                <option value="1">0 </option>*@

                        </select>

                    </div>
                    <button type="button" class="btn btn-de-primary btn-sm" onclick="showPayDoad()"
                            data-animation="bounce">
                        + اضافة
                    </button>
                    <partial name="bills/_newDoadExModal.cshtml" />


                    <button type="button" class="btn btn-de-primary btn-sm" data-bs-toggle="modal"
                            data-animation="bounce" data-bs-target="#addDoadExModal">
                        طباعة
                    </button>

                </div>
            </div>
        </div>
    </div>
</div><!--end row-->

<div class="row  d-print-none">
    <div class="col-md-6">
        <div class="form-group row mb-2">
            <label for="txtCompanyShipping" class="col-lg-3 col-form-label text-end">الخدمات: </label>
            <div class="col-lg-9">

                <div class="input-group">
                    <div class="form-outline">
                        <select class="form-select" id="compoboxService" asp-items="ViewBag.serviceBillList">
                            @*<option selected="">   </option>*@

                        </select>

                    </div>
                     <partial name="bills/_newServicesModal.cshtml" />

                    <button type="button" class="btn btn-de-primary btn-sm"
                            data-animation="bounce" onclick="showServiceDoad1()">
                        + اضافة
                    </button>

                   

                    <button type="button" class="btn btn-de-primary btn-sm"   onclick="showInPopupInvServ()">
                        طباعة
                    </button>






                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group row mb-2">

        </div>
    </div>
</div>

<div class="row  d-print-none">

    <div class="table-responsive project-invoice">
        <table class="table table-bordered mb-0">
            <thead class="thead-light">
                <tr>

                    <th>Description</th>

                    <th>Amount</th>
                </tr><!--end tr-->
            </thead>
            <tbody>
                <tr>

                    <td>
                        <h5 class="m-0 font-14">المقبوضات</h5>
                    </td>

                    <td id="totalT">00.00</td>
                </tr><!--end tr-->
                <tr>

                    <td>
                        <h5 class="m-0 font-14">المصروفات/التامين</h5>
                    </td>

                    <td id="totalE">00.00</td>
                </tr><!--end tr-->

                <tr>

                    <td>
                        <h5 class="m-0 font-14">بدل الايجار</h5>
                    </td>

                    <td>00.00</td>
                </tr><!--end tr-->

                <tr>

                    <td>
                        <h5 class="m-0 font-14">الخصم </h5>
                    </td>

              
                    <td id="totalDiscount">00.00</td>
                </tr><!--end tr-->

                <tr>

                    <td>
                        <h5 class="m-0 font-14">الضريبة </h5>
                    </td>


                    <td id="totalTax">00.00</td>

                </tr><!--end tr-->


                  <tr>

                    <td>
                        <div class="divbaladiN">
                        <h5 class="m-0 font-14">ضريبة بلدي </h5>
                        </div>
                    </td>


                    <td id="totalBaladiTax"></td>

                </tr><!--end tr-->

                <tr>

                    <td>
                        <h5 class="m-0 font-14">Serviecs </h5>
                    </td>


                    <td id="sumServices">.</td>
                </tr><!--end tr-->
                <tr>

                    <td class="border-0 font-14 text-dark"><b>اجمالي المبالغ:</b></td>
                    <td class="border-0 font-14 text-dark"  id="totalB" ><b></b>
                        @*<input type="text" asp-for="bill.Total" disabled/>*@
                    </td>
                </tr><!--end tr-->
                <tr>

                    <td class="border-0 font-14 text-dark"><b> الاجمالي قبل الضريبة</b></td>
                    <td class="border-0 font-14 text-dark" id="finishtotalbeforVAT"><b></b></td>
                </tr><!--end tr-->
                <tr>

                    <td class="border-0 font-14 text-dark"><b>التكلفة النهائية المستحقة</b></td>
                    <td class="border-0 font-14 text-dark" id="finishtotal"><b></b></td>
                </tr><!--end tr-->
                <tr class="bg-black text-white">

                    <td class="border-0 font-14"><b>الرصيد:</b></td>
                    <td class="border-0 font-14" id="balance"></td>
                </tr><!--end tr-->
            </tbody>
        </table><!--end table-->

        <div>

            <input type="hidden" id="sumServicesHidden" asp-for="summaryPrice.sum_services" />
            <input type="hidden" id="totalEHidden" asp-for="summaryPrice.sum_Ex"/>
            <input type="hidden" id="totalTHidden" asp-for="summaryPrice.sum_Pay"/>
            
        </div>
    </div>


</div>


<div>

    @{

//if (Model.status == 1)  
//{

            <div id="divEnter">
                <button class="btn btn-de-primary float-start"
                        onclick="EnterRoom()"
                        id="btnenterRoom" disabled>
                    دخول الشقة
                </button>
            </div>
        @*}
        else if (Model.status == 2)
        {*@
            <div id="divOut">
                <button class="btn btn-de-primary float-start"
                        onclick="SummaryOutput(1)"
                        id="btnout" >
                    تصفية العقد
                </button>
            </div>
        @*}*@

    }

     <a id="privew_REbtn" onclick="showInPopupRes('@Url.Action("PreViewReception", "Reception")?id=' + $('#idReception').val(),'عرض العقد')" class="btn btn-de-info float-start"><i class="fas fa-print-alt"></i> عرض العقد</a>
        
 @*   <button type="button" id="privew_REbtn"
            onclick="showReportReception()"
          
            class="btn btn-de-info float-start" disabled>
        عرض العقد
    </button>*@

    
    <button class="btn btn-info text-white float-start"  id="btnRebortBill"
    onclick="window.open('@Url.Action("showInvoice", "Reception")?id=' + $('#idReception').val(),'_blank')"
           @* onclick="@("window.location.href='" + @Url.Action("showInvoice", "Reception") + "'");"*@
    >
        عرض الفاتورة
    </button>

    <button type="button" id="privew_REbtn11"
            onclick="showReportInvReception()"
            class="btn btn-de-info float-start">
        Test
    </button>

                  
                             
       

    <a href="/HomeReception/Index" class="btn btn-de-danger  float-end">خروج</a>

    <button onclick="saveReception()" class="btn btn-de-primary float-end">حفظ</button>

    @*saveBill()*@


</div>