@model HotelSys.ViewModel.CityViewModel


@{
   
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section style{

    @*Farze+regester*@

    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">

    @*<script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>


    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>*@


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

}
<div class="page-wrapper">

    <!-- Page Content-->
    <div class="page-content-tab">

        <div class="container-fluid">
            

            <div class="row">


  <div class="container-fluid">
            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">

                        <h4 class="page-title">الاعدادات</h4>
                    </div>
                    <!--end page-title-box-->
                </div>
                <!--end col-->
            </div>

            <div class="row">

                <div class="col-sm-12">
                    <div class="page-title-box">
                        <div class="float-end">

                            <a asp-action="Index">رجوع</a>

                        </div>
                        <h4 class="page-title">اعدادات عامة </h4>
                    </div>
                    <!--end page-title-box-->
                </div>
                <br />
                <br />



                 <div class="card text-center">
  <div class="card-header">
    <ul class="nav nav-pills card-header-pills">
      <li class="nav-item">
        <a class="nav-link  " href="@Url.Action("Index", "SettingGeneral")">اعدادات الخدمات</a>
      </li>
       <li class="nav-item">
        <a class="nav-link " href="@Url.Action("Index", "H_Country")">تهيئة الدول</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="@Url.Action("Index", "H_City")">تهيئة المحافظات</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="@Url.Action("Index", "H_Area")">تهيئة المديريات</a>
      </li>
    </ul>
  </div>
  <div class="card-body">

    <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <div class="float-end">
                            <ol class="breadcrumb">
                               @*<li class="breadcrumb-item"><a href="#">المحافظات</a></li>*@
                            </ol>
                            <button type="button" class="btn btn-success" style="margin-bottom:10px" onclick="showInPopup('@Url.Action("AddOrEdit","H_City",null,Context.Request.Scheme)','محافظة جديدة')">
                                <i class="fa fa-plus"></i>  محافظة جديدة
                                    </button>
                        </div>
                         
                               
                                   
                    </div>
                    <!--end page-title-box-->
                </div>
                <!--end col-->
            </div>

            <div class="row">
                            <div class="col-md-12">

                               

                                    <div class="form-group ">
                                        <span>
                                            <label>اختر الدولة</label>
                                            <select class="form-control" id="userinputid" asp-items="ViewBag.IdCountry" asp-for="IdCountry">

                                                @**@
                                            </select>
                                            <span asp-validation-for="IdCountry" class="text-danger"></span>
                                        </span>
                                    </div>
                                   </div>
                          </div>


      
       
<div class="row">

    <div id="view-all">
     <div class="table-responsive">

      
@*
        <table class="table">
            <thead class="thead-light">
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Id)
                    </th>
                    <th>
                       <label > اسم المحافظة</label>
                    </th>

                     <th>
                        <label > عدد المديريات</label>
                    </th>
                    
                    <th>
                           </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                            
                        </td>
                         <td>
                       
                             @Html.DisplayFor(modelItem => item.countArea)
                        </td>
                        
                        <td>
                            <div>
                                <a onclick="showInPopup('@Url.Action("AddOrEdit","H_City",new {id=item.Id},Context.Request.Scheme)','تعديل المحافظة ')" class="btn btn-info text-white"><i class="fas fa-pencil-alt"></i> تعديل</a>
                                <form asp-action="Delete" asp-route-id="@item.Id" onsubmit="return jQueryAjaxDelete(this)" class="d-inline">
                                    <input type="hidden" asp-for="@item.Id" />
                                    <input type="submit" value="حذف" class="btn btn-danger" />
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
*@
    <div class="row">
                            <div class="col-md-12">



                                <div id="toolbar" class="select">
                                    <select class="form-control">
                                        <option value="">اساسي</option>
                                        <option value="selected">صفوف معينة</option>

                                        @*<option value="all">الكل</option>*@

                                    </select>
                                </div>

                                <table id="table" data-mobile-responsive="true" class="mb-5 display table table-striped table-bordered"
                                   
                                       data-toolbar="#toolbar"
                                       data-search="true"
                                       data-show-refresh="true"
                                       data-show-toggle="true"
                                       data-show-fullscreen="true"
                                       data-show-columns="true"
                                       data-show-export="true"
                                       data-click-to-select="true"
                                       data-minimum-count-columns="2"
                                       data-show-pagination-switch="true"
                                       data-pagination="true"
                                       data-id-field="id"
                                       data-page-list="[10, 25, 50, 100, all]"
                                       data-show-footer="true"
                                       data-side-pagination="server"
                                       data-show-copy-rows="true">
                                    @*<thead>
                                            <tr>
                                                <th data-field="state" data-checkbox="true"></th>
                                                <th data-field="plateNumber">plateNumber</th>
                                                <th data-field="note">note</th>
                                                <th data-field="lat">lat</th>
                                                <th data-field="long">lat</th>
                                                <th data-field="date">lat</th>
                                            </tr>
                                        </thead>*@
                                </table>






                            </div>
                        </div>


  


        


    </div>
</div>

</div>





    
  </div>
</div>



              
            </div>
        </div>

 </div><!--end row-->



        </div><!-- container -->
        <!--Start Rightbar-->
        <!--Start Rightbar/offcanvas-->
        <!--end Rightbar-->
        <!--Start Footer-->
        <!-- Footer Start -->
        <footer class="footer text-center text-sm-start">
            &copy;
            <script>
                document.write(new Date().getFullYear())
            </script> شركة اوراكس سوفت <span class="text-muted d-none d-sm-inline-block float-end">
                للانظمة
                وتقنية المعلومات
            </span>
        </footer>
        <!-- end Footer -->
        <!--end footer-->
    </div>
    <!-- end page content -->
</div>

@section scripts
{

 @*farze-regesrer*@
    

    <script>
    
   
            var $table = $('#table');



                                    $(function () {

                                       $('#myform1').on('submit', function (event) {
                                        event.preventDefault();
                                            var userId = $('#userinputid').val();

                                            $.post('@Url.Action("getFileFarzeShare", "Farez")', "id=" + userId,
                                                function (response) {

                                                window.location.href = '@Url.Action("Index", "poilo")';

                                            });
                                        });

                                            $('#toolbar').find('select').change(function () {



                                                $table.bootstrapTable('destroy').bootstrapTable({
                                                    exportDataType: $(this).val(),
                                                    //exportTypes: ['xlsx', 'xlsx', 'txt', 'csv'], //Optional export file type
                                                    exportTypes: ['xlsx', 'pdf', 'doc', 'csv', 'excel', 'png', 'txt', 'powerpoint'],
                                                    //exportFooter: true,
                                                    //  export: 'glyphicon-export icon-share',
                                                    // showExport: true,


                                                    url: '@Url.Action("GetDataFarz", "H_City")',
                                                    //height: 790,                    //ارتفاع الجدول
                                                    search: true,
                                                    searchAlign: "left",
                                                    trimOnSearch: true,         //حذف الفراغات عند البحث
                                                    searchOnEnterKey: true, //设置为 true时，按回车触发搜索方法，否则自动触发搜索方法

                                                    /* icons: {   //تغيير الايقونات الافتراضية
                                                         refresh: "glyphicon-repeat",
                                                         toggle: "glyphicon-list-alt",
                                                         columns: "glyphicon-list",
                                                         export: 'glyphicon-export'
                                                     },*/


                                                    exportOptions: {

                                                        // ignoreColumn: [0, 1], //استخراج اعمدة محددة    $(":selected", $("#userinputid")).text();
                                                        fileName: function () {
                                                            return $("#userinputid option").filter(":selected").text();
                                                        }

                                                        , //file name setting
                                                        worksheetName: 'nameUser', //table workspace name
                                                        tableName: 'nameUser',
                                                        excelstyles: ['background-color', 'color', 'font-size', 'font-weight']
                                                    },
                                                    queryParams: queryParams,       //查询函数
                                                    //pagination: true,                       //显示分页栏
                                                    showRefresh: true,               //显示刷新按钮
                                                    showColumns: true,              //是否显示内容列下拉框
                                                    // striped: true,                      //设置为 true 会有隔行变色效果
                                                    //sortName: "plateNumber",                //定义排序字段
                                                    //sortOrder: "desc",                  //定义排序方式，'asc' 或者 'desc'
                                                    // silentSort: false,                      //设置为 false 将在点击分页按钮时，自动记住排序项
                                                    //maintainSelected: true,         //设置为 true 在点击分页按钮或搜索按钮时，将记住checkbox的选择项
                                                    //toolbar: 'toolbar',          //工具栏id
                                                    // sidePagination: "server",                               //设置在哪里进行分页，可选值为 'client' 或者 'server'，默认'client'
                                                    //pageNumber: 1,                                             //如果设置了分页，首页页码
                                                    // pageSize: 20,                                               //每页每页显示行数
                                                    //  pageList: [20, 50, 100, 200, 'All'],                         //设置可供选择的页面数据条数,如果数据量大于50小于100，则只会显示20，50，100三项
                                                    showFullscreen: true,                                    //是否显示全屏按钮
                                                    responseHandler: function (data) {                  //如果后台返回的数据格式与bootstrapTable的数据格式不同在这里调整
                                                        return {
                                                            "page": data.pages,
                                                            "total": data.total,
                                                            "rows": data.list
                                                        };
                                                    },
                                                    columns: [
                                                        //{ field: 'state'},

                                                        { field: 'id', title: '#' },
                                                        { field: 'name', title: 'اسم المحافظة' },
                                                        { field: 'countArea', title: 'عدد المديريات', formatter: function (value, row, index)
                                                        { return '<a href=' + value + '  target="_blank"  rel="noopener noreferrer" >' + value + '</a>'; } },


                                                        // { field: 'lat', title: 'Lat' },
                                                        // { field: 'long', title: 'Long' },
                                                        { field: 'nameCountry', title: 'الدولة' },
                                                         { field: 'nameCountry', title: 'الدولة' },
                                                    ]

                                                })
                                            }).trigger('change')
                                        });

                                        $('#userinputid').on('change', function (event) {
                                            var form = $(event.target).parents('form');

                                            $('#table').bootstrapTable('refresh');

                                        });

                                        function queryParams(params) {
                                            //params = {
                                            //    search: "", sort: undefined, order: undefined, limit: 10,
                                            //    offset: 0,
                                            //    username: "hsam"
                                            //};//，可通过上面的配置修改
                                            var temp = {            //这里的键的名字和控制器的变量名必须一致
                                                limit: params.limit,
                                                offset: params.offset,
                                                pageSize: this.pageSize,
                                               
                                                pageNumber: this.pageNumber,
                                                userid: $("#userinputid").val()
                                            };
                                            return temp;
                                        }





                                       
                                       



    </script>





    
     @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}



}